 

# 1 **发送到发送到**





# 2 **通用dao介绍**

参看代码：laolan-bmwai

-Dfile.encoding=UTF-8

## 2.1 **Basedao**

### 2.1.1 **概述**

基于jdbcUtils，没有Statenment的一系列操作，以及没有批量更新，如果要用，自己老实的写

### 2.1.2 **多表结果思路**

第一种map：

​	好处：适合需求多变；接受单个，一条，多行结果

​	弊端：不符合面向对象的原则；hashmap初始长度12，比对象更耗内存



第二种自定义对象：

 

### 2.1.3 设置参数关闭连接

```java
public void setParameters(PreparedStatement ps, Object[] params) throws SQLException //设置参数
public static void closeConnection(Connection connection) throws SQLException{  //手动关连接
```

 

## 2.2 **增删改**批量

```java
//为ps对象设置参数
public void setParameters(PreparedStatement ps, Object[] params) throws SQLException;

    // insert、update、delete封装到一个方法中
    int executeUpdate(String sql, Object... params) throws SQLException;

    // 批量插入
    int[] executeBatch(String sql, List<Object[]> params) throws SQLException;
```



## 2.3 **查询**

```java
 /**
     * 查询封装到一个方法中
     *
     * @param sql    任意查询SQL语句
     * @param params 查询附带条件
     * @return List对应查询结果的表格数据 Map<String, Object>对应一行数据，String对应列名，Object对应列的值
     */
    List<Map<String, Object>> queryForList(String sql, Object... params);

    /**
     * 通过PRowMapper接口定义的规范，将每一行转换为对应的对象
     */
    <E> List<E> queryForList(PRowMapper<E> mapper, String sql, Object... params);

    /**
     * 【补充】反射：在程序运行过程中动态调用类的方法或修改类的属性，后门
     * Java程序的运行原理：Hello.java  →编译→   Hello.class  → JVM
     * 				BaseDaoImpl2.java  →编译→   BaseDaoImpl2.class  → JVM
     * 【面向对象】类和对象？
     * 		类：具有【共同特征】和【共同行为】的同一类对象的集合。
     * 				类的属性		类的方法（构造方法、成员方法）
     * 				Field		Method
     * .class字节码文件是不是也具有共同的特征？
     * 		所有字节码文件的描述信息，我们可以归类到Class类中，【类的类】。
     * 		将所有.class字节码文件都可以看做对象，这一列对象具有共同特征，可以归类为一个类，Class类。
     *
     * 查询返回任意对象的List<Emp> list=  BaseDao的对象.queryForList(Emp.class,
     * "select * from emp_bk where empno=?",7936)
     * <p>
     * 调用示例 List<Dept> list =  queryForList(Dept.class,
     * "select * from dept_bk where empno=?",50)
     *
     */
    public <E> List<E> queryForList(Class<E> clazz, String sql, Object... params);

    /**
     * 得到单行数据，实际对应一个对象，查询结果只返回一行数据的时候，比如根据主键查询
     * 通过身份证获取用户信息  身份证号码   	PersonInfo
     */
    public Map<String, Object> queryForObject(String sql, Object... params);

    public <E> E queryForObject(PRowMapper<E> mapper, String sql, Object... params);

    public <E> E queryForObject(Class<E> clazz, String sql, Object... params) ;
```

